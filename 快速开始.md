# DocuSnap 快速开始指南

欢迎使用 DocuSnap（注释快贴）！本指南将帮助你在 5 分钟内掌握基本用法。

## 📥 安装

### 方式 1: 从市场安装（推荐）

1. 打开 VS Code
2. 按 `Ctrl+Shift+X` 打开扩展面板
3. 搜索 "DocuSnap" 或 "注释快贴"
4. 点击"安装"

### 方式 2: 命令行安装

```bash
code --install-extension jsnjjnzx.docusnap-assets
```

## 🎯 5 分钟快速上手

### 第 1 步：插入第一张图片

1. 在代码编辑器中，将光标放在想要插入图片的位置
2. 按 `Ctrl+Shift+P` 打开命令面板
3. 输入 "插入代码描述图片" 并回车
4. 选择一张图片文件
5. 完成！代码中会自动插入类似这样的标记：
   ```javascript
   // @link@:images/my-image.png
   ```

### 第 2 步：预览图片

1. 将鼠标悬停在刚才插入的 `@link@` 标记上
2. 会弹出悬浮窗显示图片预览
3. 点击悬浮窗中的 "📌 固定预览" 按钮
4. 图片会固定显示在侧边栏的预览面板中

### 第 3 步：使用智能粘贴

1. 使用截图工具（如 `Win+Shift+S`）截取一张图
2. 在代码编辑器中按 `Ctrl+V`
3. 扩展会自动识别剪贴板中的图片
4. 选择"保存为资源并插入链接"
5. 图片会自动保存并生成 `@link@` 标记

### 第 4 步：查看所有链接

1. 点击侧边栏的 DocuSnap 图标（或按 `Ctrl+Shift+E` 切换到资源管理器）
2. 在"链接"视图中可以看到项目中所有的 `@link@` 标记
3. 点击任意链接可以跳转到代码位置
4. 右键点击链接可以删除或清理

## 💡 常用场景

### 场景 1：为算法添加流程图

```javascript
// 快速排序算法实现
// 流程图说明：
// @link@:images/quicksort-flow.png
function quickSort(arr) {
  if (arr.length <= 1) return arr;
  // ...
}
```

### 场景 2：UI 组件关联设计稿

```jsx
// 登录页面组件
// 设计稿参考：
// @link@:images/ui/login-design.png
export function LoginPage() {
  return (
    <div className="login-container">
      {/* ... */}
    </div>
  );
}
```

### 场景 3：API 接口文档

```python
# 用户注册接口
# 接口文档：
# @link@:docs/api/user-register.md
# 请求示例：
# @link@:images/api/register-request.png
def register_user(username, password):
    # ...
```

### 场景 4：测试用例截图

```typescript
// 测试：用户登录成功后跳转到首页
// 预期结果截图：
// @link@:images/test/login-success.png
test('should redirect to home after login', async () => {
  // ...
});
```

## ⚙️ 推荐配置

打开 VS Code 设置（`Ctrl+,`），搜索 "docuSnap"，建议进行以下配置：

### 1. 启用智能粘贴覆盖（可选）

如果你经常需要粘贴图片，可以启用此选项：

```json
{
  "docuSnap.overridePaste": true
}
```

启用后，在编辑器中按 `Ctrl+V` 会自动触发智能粘贴。

### 2. 自定义资源目录（可选）

默认资源目录是 `.vscode/code-assets`，你可以修改为其他位置：

```json
{
  "docuSnap.assetsDir": "docs/assets"
}
```

### 3. 添加自定义注释规则（可选）

如果你使用的编程语言不在默认支持列表中，可以添加自定义规则：

```json
{
  "docuSnap.commentTokenRules": [
    "{c,cpp,h,hpp,js,jsx,ts,tsx,mjs,cjs,java,cs,go,rs,kt,scala,swift}-{//}",
    "{py,sh,bash,zsh,ps1,bat,toml,yaml,yml,r,pl,rb,coffee}-{#}",
    "{lua,sql,hs}-{--}",
    "{m,erl}-%",
    "{vue,html,xml}-{<!-- -->}"
  ]
}
```

## 🎨 界面导览

### 侧边栏视图

点击侧边栏的 DocuSnap 图标，会看到两个面板：

#### 1. 链接视图
- 显示项目中所有 `@link@` 链接
- 按文件分组
- 点击链接跳转到代码
- 工具栏按钮：
  - 🔄 刷新链接列表
  - 👁️ 切换显示模式（全部/仅无效）
  - 🧹 清理无效链接

#### 2. 预览视图
- 显示固定的资源预览
- 支持图片和文本文档
- 点击"清空预览"关闭

### 右键菜单

在编辑器中右键点击，选择"注释快贴"子菜单，可以快速访问：
- 插入代码描述图片
- 插入代码描述文档
- 从剪贴板插入
- 清理无效链接

## 🔑 快捷键

| 功能 | 快捷键 | 说明 |
|------|--------|------|
| 智能粘贴 | `Ctrl+V` | 需启用 `overridePaste` 配置 |
| 命令面板 | `Ctrl+Shift+P` | 输入 "DocuSnap" 查看所有命令 |
| 打开设置 | `Ctrl+,` | 搜索 "docuSnap" 配置扩展 |

## 📚 支持的文件类型

### 图片格式
- PNG (.png)
- JPEG (.jpg, .jpeg)
- GIF (.gif)
- SVG (.svg)
- WebP (.webp)

### 文档格式
- Markdown (.md)
- 文本 (.txt)
- PDF (.pdf)

## 🔧 常见问题

### Q: 粘贴图片没有反应？

**A**: 检查以下几点：
1. 是否启用了 `docuSnap.overridePaste` 配置
2. 剪贴板中是否确实有图片内容
3. 尝试使用命令"从剪贴板插入"代替

### Q: 悬浮预览不显示？

**A**: 确保：
1. `@link@` 标记格式正确：`@link@:相对路径`
2. 文件确实存在于资源目录中
3. 鼠标悬停在标记上（不是路径上）

### Q: 如何批量插入多张图片？

**A**: 
1. 在文件管理器中选择多张图片
2. 复制（`Ctrl+C`）
3. 在编辑器中按 `Ctrl+V`
4. 扩展会为每张图片生成一行标记

### Q: 资源文件可以放在项目外吗？

**A**: 可以，在设置中配置绝对路径：
```json
{
  "docuSnap.assetsDir": "D:/SharedAssets"
}
```

### Q: 如何清理不再使用的资源文件？

**A**: 
1. 打开侧边栏的"链接"视图
2. 点击工具栏的"切换显示"按钮，只显示无效链接
3. 点击"清理"按钮批量删除无效链接
4. 手动删除资源目录中不再被引用的文件

## 🎓 进阶技巧

### 技巧 1：组织资源文件

建议按功能模块组织资源：

```
.vscode/code-assets/
├── images/
│   ├── ui/              # UI 相关
│   ├── flow/            # 流程图
│   ├── api/             # API 截图
│   └── test/            # 测试截图
└── docs/
    ├── specs/           # 规格说明
    ├── guides/          # 使用指南
    └── api/             # API 文档
```

### 技巧 2：结合 Git 使用

将资源目录纳入版本控制：

```bash
git add .vscode/code-assets
git commit -m "docs: add code documentation assets"
```

团队成员拉取代码后就能看到相同的文档和图片。

### 技巧 3：使用相对路径

如果资源文件在项目的其他位置，可以使用相对路径：

```javascript
// @link@:../../docs/images/diagram.png
```

### 技巧 4：定期维护

建议每月执行一次：
1. 运行"清理无效链接"命令
2. 检查资源目录大小
3. 删除不再使用的文件
4. 优化大图片文件

## 📖 更多资源

- **完整文档**: [README.md](README.md)
- **更新日志**: [CHANGELOG.md](CHANGELOG.md)
- **GitHub 仓库**: https://github.com/jsnjjnzx/DocuSnap
- **问题反馈**: https://github.com/jsnjjnzx/DocuSnap/issues

## 🎉 开始使用

现在你已经掌握了 DocuSnap 的基本用法，开始在你的项目中使用吧！

如果遇到任何问题，欢迎在 GitHub 上提交 Issue。

---

**祝你编码愉快！** 💻✨
